<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Statystyki kliknięć</h2>
    <a routerLink="/email" class="btn btn-outline-secondary">← Skrzynka</a>
  </div>

  <div *ngIf="loading" class="mb-3">
    <span class="spinner-border spinner-border-sm me-2"></span>
    Ładowanie…
  </div>
  <div *ngIf="error" class="text-danger">{{ error }}</div>

  <!-- Przegląd (Top 10 + tabela podsumowania) -->
  <app-email-stats-overview
    [summary]="summary"
    [sinceDays]="sinceDays"
    [loading]="loading"
    [refreshing]="refreshing"
    [selectedMessageId]="selected?.messageId || null"
    (refreshRequested)="onRefreshRequested($event)"
    (exportSummary)="onExportSummary()"
    (selectRow)="onSelectRow($event)"
    (exportClicks)="onExportClicks($event)">
  </app-email-stats-overview>

  <!-- Szczegóły (filtry + wykres czasu + tabela klików) -->
  <app-email-stats-details
    [selected]="selected || null"
    [clicks]="selectedClicks"
    (exportClicks)="onExportClicks($event)">
  </app-email-stats-details>
</div>
