<div class="container">
  <h2>Kontakty</h2>

  <div class="actions d-flex gap-2 mb-3">
    <button (click)="exportAll('csv')">Eksport CSV</button>
    <button (click)="exportAll('xlsx')">Eksport XLSX</button>
    <button (click)="exportAll('pdf')">Eksport PDF</button>
    <input type="file" #fileInput hidden (change)="importFile($event)"/>
    <button (click)="fileInput.click()">Import CSV/XLSX</button>
  </div>

  <form [formGroup]="filterForm" class="filters d-flex gap-2 mb-3">
    <input formControlName="q" placeholder="Szukaj…">
    <input formControlName="tags" placeholder="Filtruj tagi">
    <select formControlName="status">
      <option value="">Wszystkie statusy</option>
      <option *ngFor="let s of availableStatuses" [value]="s">{{ s }}</option>
    </select>
    <input type="date" formControlName="dateFrom">
    <input type="date" formControlName="dateTo">
    <input formControlName="source" placeholder="Źródło lejka">
    <input formControlName="region" placeholder="Region">
  </form>

  <button routerLink="new">Dodaj kontakt</button>

  <ul>
    <li *ngFor="let c of filteredContacts">
      {{ c.firstName }} {{ c.lastName }} —
      {{ c.company }} —
      {{ c.createdAt | date:'short' }} —
      {{ c.source }} —
      {{ c.region }} —
      Firma powiązana: {{ getContactName(c.companyId) }} —
      Przełożony: {{ getContactName(c.managerId) }} —
      Decydent: {{ getContactName(c.decisionMakerId) }}
      <button [routerLink]="[c.id]">Edytuj</button>
      <button (click)="onDelete(c.id)">Usuń</button>
    </li>
  </ul>
</div>
