<div class="container-fluid mt-4">
  <div class="d-flex justify-content-between align-items-center">
    <h2>Lejek sprzedaży</h2>
    <button routerLink="lead/new" class="btn btn-primary">Nowy lead</button>
  </div>

  <div class="d-flex overflow-auto stage-row">
    <div class="stage-column me-3" *ngFor="let stage of stages">
      <h5 class="text-center">{{ stage.name }}</h5>
      <div
        cdkDropList
        [cdkDropListData]="leadsByStage[stage.id]"
        class="list-container"
        (cdkDropListDropped)="drop($event, stage)"
      >
        <div
          class="lead-card mb-2"
          *ngFor="let lead of leadsByStage[stage.id]"
          cdkDrag
        >
          <strong>{{ lead.title }}</strong>
          <div><small>Ostatnia zmiana: {{ lead.stageChangedAt | date:'short' }}</small></div>
          <div class="mt-1 text-end">
            <a [routerLink]="['lead', lead.id]" class="btn btn-sm btn-outline-secondary">
              Szczegóły
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-3">
    <button routerLink="config" class="btn btn-outline-secondary">
      Konfiguracja etapów
    </button>
  </div>
</div>
