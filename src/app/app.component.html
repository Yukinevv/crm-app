<nav class="navbar navbar-light bg-light fixed-top">
  <div class="container-fluid">
    <button class="btn btn-outline-primary me-2"
            aria-label="Otwórz menu"
            (click)="toggleSidebar()">
      <i class="bi bi-list"></i>
    </button>

    <a class="navbar-brand fw-bold" href="#">CRM-APP</a>

    <div class="d-flex ms-auto align-items-center">
      <ng-container *ngIf="user$ | async as user; else guestLinks">
        <span class="navbar-text me-3 mr-2">{{ user.email }}</span>
        <button class="btn btn-outline-danger d-flex align-items-center" (click)="logout()">
          <i class="bi bi-box-arrow-right me-1 pr-1"></i> Wyloguj
        </button>
      </ng-container>

      <ng-template #guestLinks>
        <button routerLink="/login" class="btn btn-outline-primary me-2 d-flex align-items-center mr-2">
          <i class="bi bi-box-arrow-in-right me-1 pr-1"></i> Zaloguj się
        </button>
        <button routerLink="/register" class="btn btn-outline-secondary d-flex align-items-center">
          <i class="bi bi-person-plus me-1 pr-1"></i> Rejestracja
        </button>
      </ng-template>
    </div>
  </div>
</nav>

<div class="content-wrapper">
  <aside class="sidebar" [class.open]="sidebarOpen">
    <nav class="nav flex-column p-3">
      <button routerLink="/contacts"
              class="btn btn-light sidebar-btn mb-2 d-flex align-items-center"
              (click)="toggleSidebar()">
        <i class="bi bi-person-lines-fill me-2"></i> Kontakty
      </button>
      <button routerLink="/sales-funnel"
              class="btn btn-light sidebar-btn mb-2 d-flex align-items-center"
              (click)="toggleSidebar()">
        <i class="bi bi-bar-chart-line me-2"></i> Lejek sprzedaży
      </button>
      <button routerLink="/test"
              class="btn btn-light sidebar-btn d-flex align-items-center"
              (click)="toggleSidebar()">
        <i class="bi bi-tools me-2"></i> Testowy moduł
      </button>
    </nav>
  </aside>
  <main class="flex-fill p-3">
    <router-outlet></router-outlet>
  </main>
</div>

<app-footer></app-footer>
