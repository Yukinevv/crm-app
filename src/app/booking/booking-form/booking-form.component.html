<div class="container mt-4">
    <div *ngIf="loading">Ładowanie...</div>
    <div *ngIf="error" class="text-danger">{{ error }}</div>

    <div *ngIf="!loading && !submitted && slot">
        <h2>Rezerwacja terminu</h2>
        <p class="mt-3">
            Termin:
            {{ slot.start | date:'fullDate' }}
            od {{ slot.start | date:'shortTime' }}
            do {{ slot.end | date:'shortTime' }}
        </p>

        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="mb-3 mt-4">
                <label>Imię i nazwisko</label>
                <input formControlName="name" class="form-control"/>
                <div
                        *ngIf="form.get('name')?.invalid && form.get('name')?.touched"
                        class="text-danger small">
                    Pole jest wymagane
                </div>
            </div>

            <div class="mb-4">
                <label>Adres email</label>
                <input formControlName="email" class="form-control"/>
                <div
                        *ngIf="form.get('email')?.invalid && form.get('email')?.touched"
                        class="text-danger small">
                    Podaj poprawny email
                </div>
            </div>

            <button class="btn btn-primary" type="submit" [disabled]="form.invalid">
                Potwierdź rezerwację
            </button>
            <button type="button" class="btn btn-secondary ml-2" (click)="router.navigate(['/booking'])">
                Anuluj
            </button>
        </form>
    </div>

    <div *ngIf="submitted" class="alert alert-success">
        Twoja rezerwacja została zapisana. Za chwilę wrócisz do listy terminów.
    </div>
</div>
